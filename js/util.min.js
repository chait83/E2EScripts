function cleanStr(strData){if(strData===undefined||strData==null){return ''}if(strData.constructor!=String){return ''}strData=strData.replace(/[;\\/:*?\"<>|&']/g,' ');strData=strData.replace(/^\s+|\s+$|\s+(?=\s)/g,'');return strData}function validateRAlpaNum(name,desc,maxLen=25){name='#'+name;var str=$(name).val();var op={"R":false,"V":str};if(str.length>maxLen){dispSubMsg(name,"Length of "+desc+" cannot be greater than "+maxLen+" charectors.");return op}str=cleanStr(str);var regex=/^[a-zA-Z0-9\.]+$/;if(str==''||str===undefined){$(name).focus();let msg=desc+" cannot be empty.";dispSubMsg(name,msg);return op}op.R=regex.test(str);if(op.R==false){$(name).focus();let msg=desc+" is invalid. No numbers or special charectors allowed.";dispSubMsg(name,msg);return op}clearSubMsg(name);return op}function validateName(name,desc,maxLen=20){name='#'+name;var str=$(name).val();var op={"R":false,"V":str};if(str.length>maxLen){dispSubMsg(name,"Length of "+desc+" cannot be greater than "+maxLen+" charectors.");return op}var regex=/^[a-zA-Z]+$/;let msg="";if(typeof str===undefined){$(name).focus();let msg=desc+" cannot be empty.";dispSubMsg(name,msg);return op}if(str==''){op.R=true;return op}op.R=regex.test(str);if(op.R==false){$(name).focus();let msg=desc+" is invalid. No numbers or special charectors allowed.";dispSubMsg(name,msg);return op}clearSubMsg(name);return op}function validateFName(name,desc,maxLen=20){name='#'+name;var str=$(name).val();var op={"R":false,"V":str};if(str.length>maxLen){dispSubMsg(name,"Length of "+desc+" cannot be greater than "+maxLen+" charectors.");return op}str=cleanStr(str);var regex=/^[a-zA-Z\ \.\',\- ]+$/;if(str===undefined||str==''){op.V='';op.R=true;$(name).focus();return op}op.R=regex.test(str);if(op.R==false){$(name).focus();let msg=desc+" is invalid. No numbers or special charectors allowed.";dispSubMsg(name,msg);return op}clearSubMsg(name);return op}function dispSubMsg(name,msg){$(".divMsg").css('display','none');$(name).focus();$(name).attr('class','errTxt');var divName="div"+name.replace("#","");var divHandle=$("#"+divName);if(divHandle.length>0){divHandle.html(msg)}else{var parent=$(name).parent();var divMsg='<div class="subMsg alert alert-danger" id="'+divName+'">'+msg+' </div>';parent.append(divMsg)}$(".divMsg").focus()}function clearSubMsg(name){$(name).attr('class','form-control');var divId="#div"+name.replace("#","");var divHandle=$(divId);if(divHandle.length>0){divHandle.remove()}}function validateRFName(name,desc,maxLen=20){name='#'+name;var str=$(name).val();var op={"R":false,"V":str};if(str.length>maxLen){dispSubMsg(name,"Length of "+desc+" cannot be greater than "+maxLen+" charectors.");return op}str=cleanStr(str);var regex=/^[a-zA-Z\ \.\',\-]+$/;let msg="";if(str===undefined||str==''){op.R=false;op.V='';msg=desc+" cannot be empty.";dispSubMsg(name,msg);$(name).focus();return op}op.R=regex.test(str);if(op.R==false){msg=desc+" is invalid. No numbers or special charectors allowed.";dispSubMsg(name,msg);$(name).focus();return op}clearSubMsg(name);return op}function validateRName(name,desc,maxLen=20){name='#'+name;var str=$(name).val();var op={"R":false,"V":str};if(str.length>maxLen){dispSubMsg(name,"Length of "+desc+" cannot be greater than "+maxLen+" charectors.");return op}str=cleanStr(str);var regex=/^[a-zA-Z]+$/;if(str===undefined||str==''){op.R=false;op.V='';let msg=desc+" cannot be empty.";dispSubMsg(name,msg);$(name).focus();return op}op.R=regex.test(str);if(op.R==false){$(name).siblings('.label-material').addClass('active');let msg=desc+" is invalid. Numbers or special charectors allowed.";dispSubMsg(name,msg);$(name).focus();return op}clearSubMsg(name);return op}function validateRPh(name,desc,maxLen=20){name='#'+name;var str=$(name).val();var op={"R":false,"V":str};if(str.length>maxLen){dispSubMsg(name,"Length of "+desc+" cannot be greater than "+maxLen+" charectors.");return op}str=cleanStr(str);var regex=/^\d{10}$/;if(str===undefined||str==''){$(name).focus();let msg=desc+" cannot be empty.";dispSubMsg(name,msg);$(name).focus();return op}op.R=regex.test(str);if(op.R==false){$(name).focus();let msg=desc+" is invalid. Please enter a valid 10 digit mobile no.";dispSubMsg(name,msg);$(name).focus();return op}clearSubMsg(name);return op}function validatePh(name,desc,maxLen=20){name='#'+name;var str=$(name).val();var op={"R":false,"V":str};if(str.length>maxLen){dispSubMsg(name,"Length of "+desc+" cannot be greater than "+maxLen+" charectors.");return op}str=cleanStr(str);var regex=/^\d{10}$/;if(str===undefined||str==''){op.str='';op.R=true;$(name).focus();return op}op.R=regex.test(str);if(op.R==false){$(name).focus();let msg=desc+" is invalid. Please enter a valid 10 digit mobile no.";dispSubMsg(name,msg);$(name).focus();return op}clearSubMsg(name);return op}function validateEmail(name,desc,maxLen=50){name='#'+name;var str=$(name).val();var op={"R":false,"V":str};if(str.length>maxLen){dispSubMsg(name,"Length of "+desc+" cannot be greater than "+maxLen+" charectors.");return op}str=cleanStr(str);var regex=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(typeof str===undefined){$(name).focus();let msg=desc+" cannot be empty.";dispSubMsg(name,msg);$(name).focus();return op}if(str==''){op.R=true;return op}op.R=regex.test(str);if(op.R==false){$(name).focus();let msg=desc+" is invalid. Please enter a valid email ID.";dispSubMsg(name,msg);return op}clearSubMsg(name);return op}function validateNum(name,desc,maxLen=20){name='#'+name;var str=$(name).val();var op={"R":false,"V":str};if(str.length>maxLen){dispSubMsg(name,"Length of "+desc+" cannot be greater than "+maxLen+" charectors.");return op}str=cleanStr(str);if(str===undefined||str==''){return op}var regex=/^\d{1,10}(\.\d{1,2})?$/;op.R=regex.test(str);if(op.R==false){$(name).focus();let msg=desc+" is invalid. Please enter a valid number";dispSubMsg(name,msg);return op}clearSubMsg(name);return op}function validateRNum(name,desc,maxLen=20){name='#'+name;var str=$(name).val();var op={"R":false,"V":str};if(str.length>maxLen){dispSubMsg(name,"Length of "+desc+" cannot be greater than "+maxLen+" charectors.");return op}str=cleanStr(str);if(str===undefined||str==''){$(name).focus();let msg=desc+" is empty. Please enter a valid number";dispSubMsg(name,msg);return op}var regex=/^\d{1,10}(\.\d{1,2})?$/;op.R=regex.test(str);if(op.R==false){$(name).focus();let msg=desc+" is invalid. Please enter a valid number";dispSubMsg(name,msg);return op}clearSubMsg(name);return op}function validateDate(name,desc,maxLen=10){name='#'+name;var str=$(name).val();var op={"R":false,"V":str};if(str.length>maxLen){dispSubMsg(name,"Length of "+desc+" cannot be greater than "+maxLen+" charectors.");return op}str=cleanStr(str);var regex=/^([0-2][0-9]|(3)[0-1])(\-)(((0)[0-9])|((1)[0-2]))(\-)\d{4}$/i;op={"R":true,"V":str};return op}function validateRDate(name,desc,maxLen=10){name='#'+name;var str=$(name).val();var op={"R":false,"V":str};if(str==null||str.length==0){dispSubMsg(name,desc+" cannot be empty.");return op}if(str.length>maxLen){dispSubMsg(name,"Length of "+desc+" cannot be greater than "+maxLen+" charectors.");return op}str=cleanStr(str);var op={"R":true,"V":str};return op}function validateSp(name,desc,maxLen=20){name='#'+name;var str=$(name).val();var op={"R":false,"V":str};if(str.length>maxLen){dispSubMsg(name,"Length of "+desc+" cannot be greater than "+maxLen+" charectors.");return op}str=cleanStr(str);return op}function clearMsg(name){var divMsg=$(".divMsg");divMsg.html('');divMsg.attr("class",'divMsg');divMsg.css('display','none')}function dispMesg(divName,className,msg){var divMsg=$(".divMsg");className+=" divMsg";divMsg.html(msg);divMsg.css('display','block');divMsg.attr("class",className);divMsg.focus()}function assert(cond){if(cond.R==true){return true}throw new Error(cond)}function assertV(cond){if(cond.R==true){return cond.V}throw new Error(cond)}function validateREmail(name,desc,maxLen=50){name='#'+name;var str=$(name).val();var op={"R":false,"V":str};if(typeof str===undefined||str==''){$(name).focus();let msg=desc+" cannot be empty.";dispSubMsg(name,msg);return op}if(str.length>maxLen){$(name).focus();dispSubMsg(name,"Length of "+desc+" cannot be greater than "+maxLen+" charectors.");return op}str=cleanStr(str);var regex=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;op.R=regex.test(str);if(op.R==false){$(name).focus();let msg=desc+" is invalid. Please enter a valid email ID.";dispSubMsg(name,msg);return op}clearSubMsg(name);return op}function validateRPh(name,desc,maxLen=20){op=validateRNum(name,desc,maxLen);if(op.V.length!=10){op.V=false;$(name).focus();let msg=desc+" is invalid. Please enter a valid 10 digit phone number.";dispSubMsg(name,msg);return op}clearSubMsg(name);return op}function validateRText(name,desc,maxLen=20){return validateRName(name,desc,maxLen)}function validateText(name,desc,maxLen=20){return validateName(name,desc,maxLen)}function validatePass(name,desc,maxLen=20){name='#'+name;var regex=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;var str=$(name).val();var op={"R":true,"V":str};return op}function validateRRad(name,desc,maxLen=20){var input='input:radio[name='+name+']:checked';var str=$(input).val();var op={"R":false,"V":str};if(str===undefined||str==''||str=='0'){$(name).focus();let msg=desc+" cannot be blank.";dispSubMsg(name,msg);return op}clearSubMsg(name);op.R=true;return op}function validateRSel(name,desc){name='#'+name;var str=$(name).val();var op={"R":false,"V":str};if(str===undefined||str==''||str=='0'){$(name).focus();let msg=desc+" cannot be blank.";dispSubMsg(name,msg);$(name).attr('class','');return op}op.R=true;clearSubMsg(name);return op}function validateSel(name,desc){name='#'+name;var str=$(name).val();var op={"R":true,"V":str};return op}function renderMsg(){$(".divMsg").css("display","block");$(".divMsg").html('Please wait <img class="plsN"  src="icons/plw.svg" />')}function getRAPI(jData,api1,fptr){var divMsg=$(".divMsg");divMsg.attr('class','divMsg');divMsg.css("display","block");$(".divMsg").html('Please wait <img class="plsN" src="../icons/plw.svg" />');$.ajax({url:""+api1,type:"POST",dataType:"json",data:jData,contentType:"application/x-www-form-urlencoded",cache:false,timeout:5000,success:function(data){$(".divMsg").html("");fptr(data)},error:function(data){let msg;var resp=data.responseJSON;if(resp===undefined||resp.msg===undefined||resp.msg.length==0){msg="There was an error, please try after sometime."}else{msg=resp.msg}dispMesg("divMsg","alert alert-danger",msg)}})}function dispSubWaitMsg(name,desc,maxLen=20){var divName="div"+name;var divHandle=$("#"+divName);let msg='Validating '+desc+'.. <img  class="plsN" src="icons/plw.svg" />';if(divHandle.length>0){divHandle.attr('class','');divHandle.html(msg)}else{var parent=$("#"+name).parent();var divMsg='<div class="subMsg alert alert-danger" id="'+divName+'">'+msg+' </div>';parent.append(divMsg)}}function getSubApi(name,desc,jData,api1){dispSubWaitMsg(name,desc,maxLen=20);$.ajax({url:""+api1,type:"POST",dataType:"json",data:jData,contentType:"application/x-www-form-urlencoded",cache:false,timeout:5000,success:function(data){clearSubMsg("#"+name)},error:function(data){var resp=data.responseJSON;let msg="";if(resp===undefined||resp.msg===undefined||resp.msg.length==0){msg="Duplicate value"}else{msg=resp.msg}dispSubMsg(name,msg)}})}var gOptionsMsg={timeOut:3000,"closeButton":true,"debug":false,"newestOnTop":true,"progressBar":false,"positionClass":"toast-top-right","preventDuplicates":false,"onclick":null,"showDuration":"300","hideDuration":"1000","timeOut":"4000","extendedTimeOut":"1000","showEasing":"swing","hideEasing":"linear","showMethod":"fadeIn","hideMethod":"fadeOut"};function postAPITMsg(jData,api1,fptr){$.ajax({url:""+api1,type:"POST",dataType:"json",data:jData,contentType:"application/x-www-form-urlencoded",cache:false,timeout:5000,success:function(data){fptr(data)},error:function(data){let msg="";var resp=data.responseJSON;if(resp===undefined||resp.msg!==undefined||resp.msg.length==0){msg="There was an error, please try after sometime."}else{msg=resp.msg}dispMesg("divMsg","alert alert-danger",msg)}})}function getAPI(jData,api1,fptr){var divMsg=$(".divMsg");divMsg.attr('class','divMsg');divMsg.css("display","block");divMsg.html('Please wait <img class="plsN" src="icons/plw.svg" />');$.ajax({url:""+api1,type:"POST",dataType:"json",data:jData,contentType:"application/x-www-form-urlencoded",cache:false,timeout:5000,success:function(data){var divMsgS=$(".divMsg");divMsgS.css("display","none");fptr(data)},error:function(data){let msg;if(data.EC!=null&&data.EC==7){window.location='Login.html?l=sexp';return}var resp=data.responseJSON;if(resp===undefined||resp.msg===undefined||resp.msg.length==0){msg="There was an error, please try after sometime."}else{msg=resp.msg}dispMesg("divMsg","alert alert-danger",msg)}})}var months=['Jan','Feb',"Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function formatISODate(dt){if(typeof dt==='undefined'){return ""}var ary=dt.split("-");var day=ary[2].split("T");var strDate=day[0]+"-"+months[parseInt(ary[1])]+"-"+ary[0];return strDate}function dateToStr(dt){var str=dt.getDate();$("#divNoteLog").html('!{formData.Notes}');str=str+"-"+months[dt.getMonth()];str=str+"-"+(dt.getYear()-100);return str}
